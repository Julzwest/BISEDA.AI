import{p as P}from"./index-DxYZ4BqV-DKI_JK6t.js";import"./index-bsDYNq8l.js";var U={exports:{}};/*!
* $script.js JS loader & dependency manager
* https://github.com/ded/script.js
* (c) Dustin Diaz 2014 | License MIT
*/(function(I){(function(e,f){I.exports?I.exports=f():this[e]=f()})("$script",function(){var e=document,f=e.getElementsByTagName("head")[0],x=!1,g="push",S="readyState",A="onreadystatechange",p={},r={},d={},c,h;function v(t,i){for(var n=0,l=t.length;n<l;++n)if(!i(t[n]))return x;return 1}function m(t,i){v(t,function(n){return i(n),1})}function u(t,i,n){t=t[g]?t:[t];var l=i&&i.call,o=l?i:n,j=l?t.join(""):i,z=t.length;function N(a){return a.call?a():p[a]}function w(){if(!--z){p[j]=1,o&&o();for(var a in r)v(a.split("|"),N)&&!m(r[a],N)&&(r[a]=[])}}return setTimeout(function(){m(t,function a(s,L){if(s===null)return w();if(!L&&!/^https?:\/\//.test(s)&&c&&(s=s.indexOf(".js")===-1?c+s+".js":c+s),d[s])return d[s]==2?w():setTimeout(function(){a(s,!0)},0);d[s]=1,y(s,w)})},0),u}function y(t,i){var n=e.createElement("script"),l;n.onload=n.onerror=n[A]=function(){n[S]&&!/^c|loade/.test(n[S])||l||(n.onload=n[A]=null,l=1,d[t]=2,i())},n.async=1,n.src=h?t+(t.indexOf("?")===-1?"?":"&")+h:t,f.insertBefore(n,f.lastChild)}return u.get=y,u.order=function(t,i,n){(function l(o){o=t.shift(),t.length?u(o,l):u(o,i,n)})()},u.path=function(t){c=t},u.urlArgs=function(t){h=t},u.ready=function(t,i,n){t=t[g]?t:[t];var l=[];return!m(t,function(o){p[o]||l[g](o)})&&v(t,function(o){return p[o]})?i():function(o){r[o]=r[o]||[],r[o][g](i),n&&n(l)}(t.join("|")),u},u.done=function(t){u([null],t)},u})})(U);var T=U.exports;class k extends P{constructor(){super(...arguments),this.appleScriptUrl="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",this.isAppleScriptLoaded=!1}async authorize(e){return new Promise((f,x)=>{e?this.loadSignInWithAppleJS().then(g=>{var S,A,p;this.isAppleScriptLoaded=g,this.isAppleScriptLoaded?(AppleID.auth.init({clientId:e.clientId,redirectURI:e.redirectURI,scope:(S=e.scopes)!==null&&S!==void 0?S:void 0,state:(A=e.state)!==null&&A!==void 0?A:void 0,nonce:(p=e.nonce)!==null&&p!==void 0?p:void 0,usePopup:!0}),AppleID.auth.signIn().then(r=>{var d,c,h,v,m;const u={response:{user:null,email:(d=r.user)===null||d===void 0?void 0:d.email,givenName:(h=(c=r.user)===null||c===void 0?void 0:c.name)===null||h===void 0?void 0:h.firstName,familyName:(m=(v=r.user)===null||v===void 0?void 0:v.name)===null||m===void 0?void 0:m.lastName,identityToken:r.authorization.id_token,authorizationCode:r.authorization.code}};f(u)}).catch(r=>{x(r)})):x("Unable to load Sign in with Apple JS framework.")}):x("No options were provided.")})}loadSignInWithAppleJS(){return new Promise(e=>{this.isAppleScriptLoaded?e(!0):typeof window!==void 0?T.get(this.appleScriptUrl,()=>e(!0)):e(!1)})}}export{k as SignInWithAppleWeb};
