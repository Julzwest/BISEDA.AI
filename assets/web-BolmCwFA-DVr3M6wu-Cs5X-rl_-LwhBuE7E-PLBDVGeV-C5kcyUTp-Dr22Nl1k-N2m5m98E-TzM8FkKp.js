import{k as L}from"./index-UWk51MJN.js";var U={exports:{}};/*!
* $script.js JS loader & dependency manager
* https://github.com/ded/script.js
* (c) Dustin Diaz 2014 | License MIT
*/(function(y){(function(t,f){y.exports?y.exports=f():this[t]=f()})("$script",function(){var t=document,f=t.getElementsByTagName("head")[0],I=!1,g="push",S="readyState",A="onreadystatechange",c={},r={},s={},d,h;function v(n,i){for(var e=0,l=n.length;e<l;++e)if(!i(n[e]))return I;return 1}function m(n,i){v(n,function(e){return i(e),1})}function a(n,i,e){n=n[g]?n:[n];var l=i&&i.call,o=l?i:e,k=l?n.join(""):i,j=n.length;function N(p){return p.call?p():c[p]}function w(){if(!--j){c[k]=1,o&&o();for(var p in r)v(p.split("|"),N)&&!m(r[p],N)&&(r[p]=[])}}return setTimeout(function(){m(n,function p(u,z){if(u===null)return w();if(!z&&!/^https?:\/\//.test(u)&&d&&(u=u.indexOf(".js")===-1?d+u+".js":d+u),s[u])return s[u]==2?w():setTimeout(function(){p(u,!0)},0);s[u]=1,x(u,w)})},0),a}function x(n,i){var e=t.createElement("script"),l;e.onload=e.onerror=e[A]=function(){e[S]&&!/^c|loade/.test(e[S])||l||(e.onload=e[A]=null,l=1,s[n]=2,i())},e.async=1,e.src=h?n+(n.indexOf("?")===-1?"?":"&")+h:n,f.insertBefore(e,f.lastChild)}return a.get=x,a.order=function(n,i,e){(function l(o){o=n.shift(),n.length?a(o,l):a(o,i,e)})()},a.path=function(n){d=n},a.urlArgs=function(n){h=n},a.ready=function(n,i,e){n=n[g]?n:[n];var l=[];return!m(n,function(o){c[o]||l[g](o)})&&v(n,function(o){return c[o]})?i():function(o){r[o]=r[o]||[],r[o][g](i),e&&e(l)}(n.join("|")),a},a.done=function(n){a([null],n)},a})})(U);var T=U.exports;class J extends L{constructor(){super(...arguments),this.appleScriptUrl="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",this.isAppleScriptLoaded=!1}async authorize(t){return new Promise((f,I)=>{t?this.loadSignInWithAppleJS().then(g=>{var S,A,c;this.isAppleScriptLoaded=g,this.isAppleScriptLoaded?(AppleID.auth.init({clientId:t.clientId,redirectURI:t.redirectURI,scope:(S=t.scopes)!==null&&S!==void 0?S:void 0,state:(A=t.state)!==null&&A!==void 0?A:void 0,nonce:(c=t.nonce)!==null&&c!==void 0?c:void 0,usePopup:!0}),AppleID.auth.signIn().then(r=>{var s,d,h,v,m;const a={response:{user:null,email:(s=r.user)===null||s===void 0?void 0:s.email,givenName:(h=(d=r.user)===null||d===void 0?void 0:d.name)===null||h===void 0?void 0:h.firstName,familyName:(m=(v=r.user)===null||v===void 0?void 0:v.name)===null||m===void 0?void 0:m.lastName,identityToken:r.authorization.id_token,authorizationCode:r.authorization.code}};f(a)}).catch(r=>{I(r)})):I("Unable to load Sign in with Apple JS framework.")}):I("No options were provided.")})}loadSignInWithAppleJS(){return new Promise(t=>{this.isAppleScriptLoaded?t(!0):typeof window!==void 0?T.get(this.appleScriptUrl,()=>t(!0)):t(!1)})}}export{J as SignInWithAppleWeb};
