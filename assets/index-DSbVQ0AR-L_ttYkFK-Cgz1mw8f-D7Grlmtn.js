import{y as n,k as l}from"./index-CjaC1D-b.js";class s extends l{async write(a){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(a.string!==void 0)await this.writeText(a.string);else if(a.url)await this.writeText(a.url);else if(a.image)if(typeof ClipboardItem<"u")try{const t=await(await fetch(a.image)).blob(),i=new ClipboardItem({[t.type]:t});await navigator.clipboard.write([i])}catch{throw new Error("Failed to write image")}else throw this.unavailable("Writing images to the clipboard is not supported in this browser");else throw new Error("Nothing to write")}async read(){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(typeof ClipboardItem<"u")try{const a=await navigator.clipboard.read(),t=a[0].types[0],i=await a[0].getType(t);return{value:await this._getBlobData(i,t),type:t}}catch{return this.readText()}else return this.readText()}async readText(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw this.unavailable("Reading from clipboard not supported in this browser");return{value:await navigator.clipboard.readText(),type:"text/plain"}}async writeText(a){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw this.unavailable("Writting to clipboard not supported in this browser");await navigator.clipboard.writeText(a)}_getBlobData(a,t){return new Promise((i,o)=>{const e=new FileReader;t.includes("image")?e.readAsDataURL(a):e.readAsText(a),e.onloadend=()=>{const r=e.result;i(r)},e.onerror=r=>{o(r)}})}}const w=n("Clipboard",{web:()=>new s});export{w as Clipboard};
