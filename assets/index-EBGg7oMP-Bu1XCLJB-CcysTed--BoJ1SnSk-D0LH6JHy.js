import{J as n,Q as s}from"./index-D9hPFxYQ.js";class l extends s{async write(t){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(t.string!==void 0)await this.writeText(t.string);else if(t.url)await this.writeText(t.url);else if(t.image)if(typeof ClipboardItem<"u")try{const a=await(await fetch(t.image)).blob(),i=new ClipboardItem({[a.type]:a});await navigator.clipboard.write([i])}catch{throw new Error("Failed to write image")}else throw this.unavailable("Writing images to the clipboard is not supported in this browser");else throw new Error("Nothing to write")}async read(){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(typeof ClipboardItem<"u")try{const t=await navigator.clipboard.read(),a=t[0].types[0],i=await t[0].getType(a);return{value:await this._getBlobData(i,a),type:a}}catch{return this.readText()}else return this.readText()}async readText(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw this.unavailable("Reading from clipboard not supported in this browser");return{value:await navigator.clipboard.readText(),type:"text/plain"}}async writeText(t){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw this.unavailable("Writting to clipboard not supported in this browser");await navigator.clipboard.writeText(t)}_getBlobData(t,a){return new Promise((i,o)=>{const e=new FileReader;a.includes("image")?e.readAsDataURL(t):e.readAsText(t),e.onloadend=()=>{const r=e.result;i(r)},e.onerror=r=>{o(r)}})}}const w=n("Clipboard",{web:()=>new l});export{w as Clipboard};
