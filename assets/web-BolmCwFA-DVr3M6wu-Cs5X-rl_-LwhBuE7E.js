import{m as k}from"./index-BYCYyBv5.js";var N={exports:{}};/*!
* $script.js JS loader & dependency manager
* https://github.com/ded/script.js
* (c) Dustin Diaz 2014 | License MIT
*/(function(I){(function(i,f){I.exports?I.exports=f():this[i]=f()})("$script",function(){var i=document,f=i.getElementsByTagName("head")[0],x=!1,g="push",S="readyState",A="onreadystatechange",c={},r={},p={},d,h;function v(e,n){for(var t=0,l=e.length;t<l;++t)if(!n(e[t]))return x;return 1}function m(e,n){v(e,function(t){return n(t),1})}function u(e,n,t){e=e[g]?e:[e];var l=n&&n.call,o=l?n:t,U=l?e.join(""):n,z=e.length;function j(a){return a.call?a():c[a]}function w(){if(!--z){c[U]=1,o&&o();for(var a in r)v(a.split("|"),j)&&!m(r[a],j)&&(r[a]=[])}}return setTimeout(function(){m(e,function a(s,W){if(s===null)return w();if(!W&&!/^https?:\/\//.test(s)&&d&&(s=s.indexOf(".js")===-1?d+s+".js":d+s),p[s])return p[s]==2?w():setTimeout(function(){a(s,!0)},0);p[s]=1,y(s,w)})},0),u}function y(e,n){var t=i.createElement("script"),l;t.onload=t.onerror=t[A]=function(){t[S]&&!/^c|loade/.test(t[S])||l||(t.onload=t[A]=null,l=1,p[e]=2,n())},t.async=1,t.src=h?e+(e.indexOf("?")===-1?"?":"&")+h:e,f.insertBefore(t,f.lastChild)}return u.get=y,u.order=function(e,n,t){(function l(o){o=e.shift(),e.length?u(o,l):u(o,n,t)})()},u.path=function(e){d=e},u.urlArgs=function(e){h=e},u.ready=function(e,n,t){e=e[g]?e:[e];var l=[];return!m(e,function(o){c[o]||l[g](o)})&&v(e,function(o){return c[o]})?n():function(o){r[o]=r[o]||[],r[o][g](n),t&&t(l)}(e.join("|")),u},u.done=function(e){u([null],e)},u})})(N);var L=N.exports;class J extends k{constructor(){super(...arguments),this.appleScriptUrl="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",this.isAppleScriptLoaded=!1}async authorize(i){return new Promise((f,x)=>{i?this.loadSignInWithAppleJS().then(g=>{var S,A,c;this.isAppleScriptLoaded=g,this.isAppleScriptLoaded?(AppleID.auth.init({clientId:i.clientId,redirectURI:i.redirectURI,scope:(S=i.scopes)!==null&&S!==void 0?S:void 0,state:(A=i.state)!==null&&A!==void 0?A:void 0,nonce:(c=i.nonce)!==null&&c!==void 0?c:void 0,usePopup:!0}),AppleID.auth.signIn().then(r=>{var p,d,h,v,m;const u={response:{user:null,email:(p=r.user)===null||p===void 0?void 0:p.email,givenName:(h=(d=r.user)===null||d===void 0?void 0:d.name)===null||h===void 0?void 0:h.firstName,familyName:(m=(v=r.user)===null||v===void 0?void 0:v.name)===null||m===void 0?void 0:m.lastName,identityToken:r.authorization.id_token,authorizationCode:r.authorization.code}};f(u)}).catch(r=>{x(r)})):x("Unable to load Sign in with Apple JS framework.")}):x("No options were provided.")})}loadSignInWithAppleJS(){return new Promise(i=>{this.isAppleScriptLoaded?i(!0):typeof window!==void 0?L.get(this.appleScriptUrl,()=>i(!0)):i(!1)})}}export{J as SignInWithAppleWeb};
